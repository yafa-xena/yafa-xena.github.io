<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gentoo on Yafa Xena's Blog</title><link>https://www.yafa.moe/tags/gentoo/</link><description>Recent content in Gentoo on Yafa Xena's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 27 Feb 2021 21:03:54 +0800</lastBuildDate><atom:link href="https://www.yafa.moe/tags/gentoo/index.xml" rel="self" type="application/rss+xml"/><item><title>使用ZFS备份系统</title><link>https://www.yafa.moe/post/use-zfs-backup-system/</link><pubDate>Sat, 27 Feb 2021 21:03:54 +0800</pubDate><guid>https://www.yafa.moe/post/use-zfs-backup-system/</guid><description>&lt;h2 id="前言">前言&lt;/h2>
&lt;p>在之前的如何在&lt;a href="https://www.yafa.moe/post/gentoo-on-zfs/">Gentoo上优雅的吃ZFS&lt;/a>这篇文章中我们上了ZFS，但是没有给swap单独的一个分区，后来在使用中确实遇到了内存不够的情况。直接在系统里面丢swapfile是不合理的，最好是有个单独的分区给swap，所以还是要再来一次分区备份和恢复系统：）&lt;/p></description></item><item><title>在Gentoo上优雅的吃ZFS</title><link>https://www.yafa.moe/post/gentoo-on-zfs/</link><pubDate>Sun, 14 Feb 2021 10:58:06 +0800</pubDate><guid>https://www.yafa.moe/post/gentoo-on-zfs/</guid><description>&lt;h2 id="前言">前言&lt;/h2>
&lt;p>在之前的&lt;a href="https://www.yafa.moe/post/install-gentoo-on-mac/">在Mac上安装Gentoo Linux&lt;/a>这篇文章里面我成功的给现在手中的Mac安装上了Gentoo Linux，但是最近在看一些文件系统的资料看到了&lt;a href="https://en.wikipedia.org/wiki/ZFS">ZFS&lt;/a>其中的特性很是让我心动，虽然没有在虚拟机上面做一些尝试但是呢其中的快照、写时复制、数据压缩的特性很让我心动。&lt;/p>
&lt;p>如果你有了解过一定的文件系统的知识你可能会想为啥不选择&lt;a href="https://en.wikipedia.org/wiki/Btrfs">Btrfs&lt;/a>呢？而且btrfs的话内核是可以直接支持的（需要比较新的内核），这个问题也是一个好问题。因为在我之后的规划里面，我打算自建一个机房。出于成本的考虑采取的方案是存算分离，存储的部分就是打算用ZFS。对于存储来说，连续性检查自动修复，RAID就显得尤为重要，这里也是为了这个计划做一个铺垫。也许你还会说这些btrfs都有啊！为啥还要用ZFS呢？由于我现在的水品还是十分有限，现阶段更多的是调研和测试，后续真正决定要用哪个文件系统或者是组合还是要看最终的测试结果。&lt;/p>
&lt;p>因为当前用的这个Mac已经有了系统并且正常使用了一段时间，为了保持数据不丢失我先备份了一下系统。关于如何备份系统可以参考我这篇文章&lt;a href="https://www.yafa.moe/post/backup-your-gentoo-system/">备份你的Gentoo系统&lt;/a>。&lt;/p></description></item><item><title>备份你的Gentoo系统</title><link>https://www.yafa.moe/post/backup-your-gentoo-system/</link><pubDate>Sat, 13 Feb 2021 17:11:42 +0800</pubDate><guid>https://www.yafa.moe/post/backup-your-gentoo-system/</guid><description>前言 在前一篇的在Mac上安装Gentoo Linux完成后，我其实还想要折腾一下其他的文件系统比如说ZFS，BTRFS，XFS之类的，虽然说可以在虚拟机里面做实验但是还是想要整个机器切过去，但是重新安装的话耗费的时间太长了，我想备份一下系统然后重新分区之后将原来的系统恢复一下再更新一下fstab bootload之类的就可以正常使用了。
这篇文章就是讲述如何备份你的Gentoo Linux(离线备份)
准备 250G硬盘*1 （我当前的数据量在200G左右250G的硬盘能够满足一次备份，后续如果要做周期性备份的话就需要换一个更大的了） 备份 初始化硬盘 这里的初始化硬盘是为了将原来的数据全部清除并且重新建立LUKS和文件系统。出于安全的考虑，备份不应该直接在硬盘上分区创建文件系统后备份在上面，应该做一层加密再去创建文件系统和备份。
将硬盘插入需要备份的电脑上
查看新增的设备
1 2 3 4 5 6 7 8 9 10 11 fdisk -l Disk /dev/sda: 232.9 GiB, 250055122432 bytes, 488388911 sectors Disk model: 00AAJS-00B4A0 Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disklabel type: dos Disk identifier: 0x80f01a9c Device Boot Start End Sectors Size Id Type /dev/sda1 2048 488388910 488386863 232.</description></item><item><title>设置我的实验环境</title><link>https://www.yafa.moe/post/setup-my-lab/</link><pubDate>Sat, 23 Jan 2021 14:30:17 +0800</pubDate><guid>https://www.yafa.moe/post/setup-my-lab/</guid><description>前言 在结束安装Gentoo后，下一步就是要初始化我的实验环境了，我这里使用比较多的实验环境主要是在本机上创建虚拟机然后运行不同的软件和不同的环境。我常用的虚拟化软件如下:
虚拟化类型 软件包 软件虚拟化 app-emulation/virtualbox 全虚拟化 app-emulation/qemu 半虚拟化 app-emulation/xen container app-emulation/docker 这几种虚拟化各有优点，我平时是使用virtualbox做测试环境，QEMU就更加贴近生产环境，半虚拟化是做Qubes On Gentoo的准备，容器是想要快速测试东西的时候使用的，后续也会作为基础了解一下K8S之类的。
这些直接使用可能有点不是很舒服为此我还需要以下工具来方便去管理虚拟机:
软件包 描述 app-emulation/vagrant 管理Virtualbox app-emulation/libvirt 管理QEMU虚拟机 app-admin/terraform 使用libvirt的provider来管理QEMU虚拟机 app-admin/ansible 批量管理虚拟机 app-admin/salt 批量管理虚拟机 安装和配置Virtualbox环境 Virtualbox主要是放一些Whonix或者是测试的简单环境
安装Virtualbox
1 emerge --ask --verbose app-emulation/virtualbox app-emulation/virtualbox-additions app-emulation/virtualbox-extpack-oracle 为了普通用户可以正常使用Virtualbox还需要将用户添加到vboxusers组中</description></item><item><title>在Mac上安装Gentoo Linux</title><link>https://www.yafa.moe/post/install-gentoo-on-mac/</link><pubDate>Mon, 18 Jan 2021 19:41:36 -0500</pubDate><guid>https://www.yafa.moe/post/install-gentoo-on-mac/</guid><description>&lt;h2 id="前言">前言&lt;/h2>
&lt;p>这不是一份简短的Gentoo Linux安装手册，我想在这篇文章中向你展示更多Gentoo Linux的魅力。&lt;/p>
&lt;blockquote>
&lt;p>为什么选择Gentoo？&lt;/p>
&lt;/blockquote>
&lt;p>Gentoo 是一个基于源码的滚动发行版。 Gentoo的基础包和软件都是由源码来构建的并且有Portage的USE标记来开启或者是关闭软件的特性。Gentoo提供了一个类似于ports的系统（Portage）所以Gentoo更适合于系统的定制化。&lt;/p></description></item></channel></rss>